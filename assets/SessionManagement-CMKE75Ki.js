import{_ as S}from"./rustic-CThMpSS1.js";import{_,u as f,c as v,m as k,a as t,b as s,j as o,d as c,H as r,t as d,F as p,x as A,o as l}from"./index-CgZNDQrm.js";const I={class:"container main-content"},h={class:"sessions-container"},x={key:0,class:"loading-state"},C={key:1,class:"alert alert-danger",role:"alert"},D={key:2,class:"current-session"},E={class:"current-session-body"},w={class:"session-id"},N={key:3,class:"action-buttons"},B=["disabled"],F={key:4,class:"sessions-list"},M={class:"session-card-header"},V={class:"session-card-body"},L={class:"session-id"},j={class:"session-card-footer"},q=["onClick","disabled"],G={key:5,class:"no-sessions"},H={__name:"SessionManagement",setup(P){const i=f(),u=v(()=>i.sessions.filter(n=>n.isActive)),b=v(()=>u.value.length>0);k(async()=>{try{await i.getUserSessions()}catch(n){console.error("Error al cargar las sesiones:",n)}});const g=n=>new Date(n).toLocaleString(),m=async n=>{try{await i.closeSession(n)}catch(e){console.error("Error al cerrar la sesión específica:",e)}},y=async()=>{if(confirm("¿Estás seguro de que deseas cerrar todas las demás sesiones?"))try{await i.closeAllSessions()}catch(n){console.error("Error al cerrar todas las sesiones:",n)}};return(n,e)=>(l(),t(p,null,[e[13]||(e[13]=s("section",{class:"hero-section"},[s("div",{class:"video-container"},[s("video",{autoplay:"",loop:"",muted:"",playsinline:"",class:"background-video"},[s("source",{src:S,type:"video/mp4"}),s("div",{class:"video-fallback"})]),s("div",{class:"video-overlay"}),s("div",{class:"hero-content"},[s("h1",null,[s("i",{class:"bi bi-shield-lock"}),o(" Gestión de Sesiones")]),s("p",null,"Administra tus sesiones activas de forma segura")])])],-1)),s("div",I,[s("div",h,[e[12]||(e[12]=s("h2",{class:"section-title"},[s("i",{class:"bi bi-person-lock"}),o(" Sesiones Activas ")],-1)),r(i).loading?(l(),t("div",x,e[0]||(e[0]=[s("div",{class:"spinner-border text-primary",role:"status"},null,-1),s("p",null,"Cargando sesiones...",-1)]))):c("",!0),r(i).error?(l(),t("div",C,[e[1]||(e[1]=s("i",{class:"bi bi-exclamation-triangle-fill"},null,-1)),o(" "+d(r(i).error),1)])):c("",!0),r(i).currentSessionId?(l(),t("div",D,[e[4]||(e[4]=s("div",{class:"current-session-header"},[s("h3",null,[s("i",{class:"bi bi-pc-display"}),o(" Sesión Actual")])],-1)),s("div",E,[s("p",null,[e[2]||(e[2]=s("strong",null,"ID de Sesión:",-1)),s("span",w,d(r(i).currentSessionId),1)]),e[3]||(e[3]=s("p",null,[s("strong",null,"Estado:"),o(),s("span",{class:"badge bg-success"},"Activa")],-1))])])):c("",!0),b.value?(l(),t("div",N,[s("button",{onClick:y,class:"btn btn-danger",disabled:r(i).loading},e[5]||(e[5]=[s("i",{class:"bi bi-power"},null,-1),o(" Cerrar todas las sesiones ")]),8,B)])):c("",!0),b.value?(l(),t("div",F,[(l(!0),t(p,null,A(u.value,a=>(l(),t("div",{key:a.sessionId,class:"session-card"},[s("div",M,[s("h4",null,[e[6]||(e[6]=s("i",{class:"bi bi-device-hdd"},null,-1)),o(" Dispositivo: "+d(a.deviceName||"Desconocido"),1)])]),s("div",V,[s("p",null,[e[7]||(e[7]=s("strong",null,[s("i",{class:"bi bi-fingerprint"}),o(" Sesión ID:")],-1)),s("span",L,d(a.sessionId),1)]),s("p",null,[e[8]||(e[8]=s("strong",null,[s("i",{class:"bi bi-globe"}),o(" IP:")],-1)),o(" "+d(a.ipAddress),1)]),s("p",null,[e[9]||(e[9]=s("strong",null,[s("i",{class:"bi bi-calendar"}),o(" Fecha:")],-1)),o(" "+d(g(a.createdAt)),1)])]),s("div",j,[s("button",{onClick:T=>m(a.sessionId),class:"btn btn-outline-danger",disabled:r(i).loading},e[10]||(e[10]=[s("i",{class:"bi bi-x-circle"},null,-1),o(" Cerrar sesión ")]),8,q)])]))),128))])):(l(),t("div",G,e[11]||(e[11]=[s("i",{class:"bi bi-check-circle-fill"},null,-1),s("p",null,"No tienes otras sesiones activas",-1)])))])])],64))}},z=_(H,[["__scopeId","data-v-cb7f8c4c"]]);export{z as default};
